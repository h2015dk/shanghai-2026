<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‰∏äÊµ∑Âä©Êâã V21 - 2026 Ë°åÁ®ãÂ∞éËà™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --zhusha-red: #B22222; --mo-black: #2C2C2C; --paper-white: #F4F1E1; }
        body { 
            font-family: "PingFang TC", "STHeiti", serif; 
            background-color: var(--paper-white); 
            background-image: url('big-horse.jpg'); 
            background-attachment: fixed; background-position: center; background-size: cover; background-repeat: no-repeat;
            color: var(--mo-black); margin: 0; padding: 0;
        }
        .responsive-container {
            max-width: 600px; margin: 0 auto; min-height: 100vh;
            background: rgba(244, 241, 225, 0.75); position: relative; z-index: 1;
        }
        .app-card { 
            background: rgba(255, 255, 255, 0.92); backdrop-filter: blur(8px);
            border: 1px solid #D4C5A2; box-shadow: 0 4px 12px rgba(0,0,0,0.08); 
            margin-bottom: 12px; border-radius: 8px; overflow: hidden;
        }
        .nav-fixed { 
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 600px; background: rgba(244, 241, 225, 0.98); 
            border-top: 1px solid var(--mo-black); z-index: 100; padding-bottom: env(safe-area-inset-bottom); 
        }
        .recomm-badge { 
            font-size: 10px; border: 1px solid var(--zhusha-red); color: var(--zhusha-red); 
            padding: 1px 4px; border-radius: 2px; margin-right: 4px; font-weight: bold;
        }
        .spot-link { 
            display: inline-flex; align-items: center; background: #fff; 
            border: 1px solid #D4C5A2; padding: 2px 10px; border-radius: 4px; 
            margin: 2px; font-size: 11px; color: #444; font-weight: bold;
        }
        textarea { 
            background: rgba(0, 0, 0, 0.03); border: 1px dashed #D4C5A2; 
            outline: none; width: 100%; padding: 8px; border-radius: 6px;
            font-size: 12px; margin-top: 8px; color: #555;
        }
    </style>
</head>
<body class="pb-32">
    <div class="responsive-container">
        <header class="p-6 flex justify-between items-center border-b border-black sticky top-0 bg-[#F4F1E1]/95 backdrop-blur-md z-50">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-[#B22222] flex items-center justify-center text-white border border-black shadow-[2px_2px_0px_rgba(0,0,0,1)]">
                    <i class="fas fa-horse"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold tracking-tighter">‰∏äÊµ∑ËÄÉÈ©ó„ÉªË°åÁ®ãÂä©Êâã</h1>
                    <p class="text-[9px] opacity-60 uppercase tracking-widest">July 04 - July 08, 2026</p>
                </div>
            </div>
            <button onclick="openModal()" class="w-10 h-10 flex items-center justify-center border border-black active:bg-black active:text-white">
                <i class="fas fa-plus"></i>
            </button>
        </header>

        <main class="p-5" id="main-container"></main>

        <nav class="nav-fixed flex justify-around p-4 shadow-sm">
            <button onclick="showTab('schedule')" class="flex flex-col items-center text-[#B22222]">
                <i class="fas fa-scroll text-xl mb-1"></i><span class="text-[10px] font-bold uppercase">Âç∑Ëª∏Ë°åÁ®ã</span>
            </button>
            <button onclick="showTab('budget')" class="flex flex-col items-center opacity-30">
                <i class="fas fa-wallet text-xl mb-1"></i><span class="text-[10px] font-bold uppercase">Áõ§Á∫èË®òÂ∏≥</span>
            </button>
        </nav>
    </div>

    <script>
        const CATEGORY_ICONS = { food: 'üçú', exam: '‚úçÔ∏è', spot: 'üìç', transport: 'üöá', hotel: 'üè®' };
        
        // AI Êé®Ëñ¶Ë≥áÊñôÂ∫´ (Ê†πÊìöÂú∞ÈªûËá™ÂãïÈÅ©ÈÖç)
        const DB = {
            "Êú±ÂÆ∂Ëßí": { restaurants: ["ÈòøÂ©ÜËßíÁ≤Ω", "ËåÇË®òÈÜ¨Âúí", "‰∫ï‰∫≠Â§ßËÇâ"], spots: ["ÊîæÁîüÊ©ã", "Ë™≤Ê§çÂúí", "Â§ßÊ∏ÖÈÉµÂ±Ä"] },
            "Ë±´Âúí": { restaurants: ["ÂçóÁøîÈ•ÖÈ†≠Â∫ó", "‰∏äÊµ∑ËÄÅÈ£ØÂ∫ó", "ÊùæÊúàÊ®ìÁ¥†Ëèú"], spots: ["‰πùÊõ≤Ê©ã", "ÂüéÈöçÂªü", "ÊñáÂªü"] },
            "ÈùúÂÆâ": { restaurants: ["ÁéãÂÆ∂Ê≤ôÈªûÂøÉ", "‰∏∞Ë£ïÁîüÁÖé", "Â∞èÊ•äÁîüÁÖé"], spots: ["ÈùúÂÆâÂÖ¨Âúí", "‰∏äÊµ∑Â±ïË¶Ω‰∏≠ÂøÉ", "ÂºµÂúí"] }
        };

        function getRecomm(title, day) {
            if (day === "07/04" || title.includes("ËÄÉË©¶")) return null;
            if (title.includes("Êú±ÂÆ∂Ëßí")) return DB["Êú±ÂÆ∂Ëßí"];
            if (title.includes("Ë±´Âúí") || title.includes("ÂüéÈöçÂªü")) return DB["Ë±´Âúí"];
            if (title.includes("ÈùúÂÆâ") || title.includes("ËêäËêä")) return DB["ÈùúÂÆâ"];
            return null;
        }

        // ÂÆåÊï¥Ë°åÁ®ãË°®Ë≥áÊñô (07/04 - 07/08)
        let schedules = {
            "07/04": [
                { id: 101, title: "‰∏äÊµ∑ËôπÊ©ãÁ´ô (Ê©üÂ†¥ÊäµÈÅî)", type: "transport", amap: "‰∏äÊµ∑ËôπÊ°•Á´ô" },
                { id: 102, title: "‰∏äÊµ∑ËôπÊ©ãÂïÜÂãôÂçÄÂá±ÊÇÖÂòâÂØìÈ£ØÂ∫ó (ÂÖ•‰Ωè)", type: "hotel", amap: "‰∏äÊµ∑ËôπÊ°•ÂïÜÂä°Âå∫ÂáØÊÇ¶ÂòâÂØìÈ•≠Â∫ó" }
            ],
            "07/05": [
                { id: 201, title: "‰∏äÊµ∑ÂúãÂÆ∂Ë≥áÊ†ºËÄÉË©¶ (ËôπÂêõ)", type: "exam", amap: "‰∏äÊµ∑ÂõΩÂÆ∂ËµÑÊ†ºËÄÉËØï" },
                { id: 202, title: "ËôπÊ©ãÁÅ´ËªäÁ´ô (ÂçàÈ§ê/‰πòËªä)", type: "transport", amap: "ËôπÊ°•ÁÅ´ËΩ¶Á´ô" },
                { id: 203, title: "Êú±ÂÆ∂ËßíËªäÁ´ô (ÊäµÈÅî)", type: "spot", amap: "Êú±ÂÆ∂ËßíËΩ¶Á´ô" },
                { id: 204, title: "È©¢ËÇâÁÅ´Ááí (ÂÆµÂ§ú)", type: "food", amap: "È©¥ËÇâÁÅ´ÁÉß" },
                { id: 205, title: "ËèØËàíÈÄ∏È£ØÂ∫ó (Êú±ÂÆ∂ËßíÂ∫ó)", type: "hotel", amap: "ÂçéËàíÈÄ∏È•≠Â∫óÔºàÈùíÊµ¶Âå∫Êú±ÂÆ∂ËßíÂè§ÈïáÂ∫óÔºâ" }
            ],
            "07/06": [
                { id: 301, title: "ÈùúÂÆâÂØ∫ËªäÁ´ô (ÊäµÈÅî)", type: "transport", amap: "ÈùôÂÆâÂØ∫ËΩ¶Á´ô" },
                { id: 302, title: "Êª¨Ë•øËÄÅÂºÑÂ†ÇÈ∫µÈ§® (ÂçàÈ§ê)", type: "food", amap: "Ê≤™Ë•øËÄÅÂºÑÂ†ÇÈù¢È¶Ü" },
                { id: 303, title: "ÂÆâÁ¶èË∑Ø/Áî∞Â≠êÂùä/ÂüéÈöçÂªü/Ë±´Âúí", type: "spot", amap: "Ë±´Âõ≠" },
                { id: 304, title: "Â∞èÊ•äÁîüÁÖé (ÂÆµÂ§ú)", type: "food", amap: "Â∞èÊù®ÁîüÁÖé" },
                { id: 305, title: "ÂπæÊú®Á≠±ÁØâÈ£ØÂ∫ó (ÈùúÂÆâÂØ∫Â∫ó)", type: "hotel", amap: "Âá†Êú®Á≠±Á≠ëÈ•≠Â∫óÔºà‰∏äÊµ∑ÈùôÂÆâÂØ∫Â∫óÔºâ" }
            ],
            "07/07": [
                { id: 401, title: "ÊòüÂ∑¥ÂÖãËáªÈÅ∏(‰∏äÊµ∑ÁÉòÁÑôÂ∑•Âùä)", type: "food", amap: "ÊòüÂ∑¥ÂÖãËáªÈÄâ(‰∏äÊµ∑ÁÉòÁÑôÂ∑•Âùä)" },
                { id: 402, title: "‰∏äÊµ∑ÂõõË°åÂÄâÂ∫´ÊäóÊà∞Á¥ÄÂøµÈ§®", type: "spot", amap: "‰∏äÊµ∑ÂõõË°å‰ªìÂ∫ìÊäóÊàòÁ∫™ÂøµÈ¶Ü" },
                { id: 403, title: "Âçó‰∫¨Ë∑ØÊ≠•Ë°åË°ó", type: "spot", amap: "Âçó‰∫¨Ë∑ØÊ≠•Ë°åË°ó" },
                { id: 404, title: "ËüπÂèÅÂØ≥¬∑ËüπÂÆ∂ÂÆ¥ (ÂçàÈ§ê)", type: "food", amap: "ËüπÂèÅÂØ≥¬∑ËüπÂÆ∂ÂÆ¥¬∑ËüπÈªÑÊçûÈ•≠" },
                { id: 405, title: "Â§ñÁÅò / ÊúµÈõ≤Êõ∏Èô¢", type: "spot", amap: "Â§ñÊª©" },
                { id: 406, title: "ËêäËêäÊπØÂåÖ (ÂÆµÂ§ú)", type: "food", amap: "Ëé±Ëé±Ê±§ÂåÖ" }
            ],
            "07/08": [
                { id: 501, title: "ÈùúÂÆâÂØ∫Âë®ÈÇäÊé¢Á¥¢", type: "spot", amap: "ÈùôÂÆâÂØ∫ËΩ¶Á´ô" },
                { id: 502, title: "Â•∂Â•∂ÁöÑÂë≥ÈÅì(ËÜ†Â∑ûË∑ØÂ∫ó)", type: "food", amap: "Â•∂Â•∂ÁöÑÂë≥ÈÅì(ËÉ∂Â∑ûË∑ØÂ∫ó)" },
                { id: 503, title: "‰∏äÊµ∑ËôπÊ©ãÊ©üÂ†¥ (ËøîÂè∞)", type: "transport", amap: "‰∏äÊµ∑ËôπÊ°•Êú∫Âú∫" }
            ]
        };

        function renderSchedules() {
            const container = document.getElementById('main-container'); container.innerHTML = '';
            Object.keys(schedules).forEach(day => {
                const section = document.createElement('section'); section.className = "mb-8";
                section.innerHTML = `<h2 class="text-[10px] font-black italic mb-3 text-gray-400 tracking-widest border-l-2 border-red-800 pl-2">üóìÔ∏è ${day} Ë°åÁ®ãÊ∏ÖÂñÆ</h2><div id="list-${day.replace('/','-')}" class="sortable-list"></div>`;
                container.appendChild(section);
                
                schedules[day].forEach(item => {
                    const rec = getRecomm(item.title, day);
                    const card = document.createElement('div'); card.className = "app-card p-4";
                    card.dataset.id = item.id;
                    
                    let recommHtml = '';
                    if (rec) {
                        const spotLinks = rec.spots.map(s => `<button onclick="goAmap('${s}')" class="spot-link">üìç ${s}</button>`).join('');
                        recommHtml = `<div class="mt-3 pt-3 border-t border-gray-100 text-[11px]">
                            <div class="mb-1"><span class="recomm-badge">Ëñ¶</span> <span class="text-gray-500">${rec.restaurants.join('„Éª')}</span></div>
                            <div class="flex flex-wrap">${spotLinks}</div></div>`;
                    }

                    card.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div class="flex-grow">
                                <div class="text-[10px] text-red-800 font-bold opacity-50 mb-1 uppercase">${item.type}</div>
                                <div class="font-bold text-gray-800 leading-tight">${CATEGORY_ICONS[item.type]} ${item.title}</div>
                            </div>
                            <button onclick="goAmap('${item.amap || item.title}')" class="text-red-800 active:scale-125 transition-all ml-2">
                                <i class="fas fa-location-arrow text-lg"></i>
                            </button>
                        </div>
                        ${recommHtml}
                        <textarea placeholder="ÈªûÊìäË®òÈåÑÂÇôË®ª..."></textarea>`;
                    section.querySelector('.sortable-list').appendChild(card);
                });
            });
        }

        function goAmap(k) { window.location.href = `amapuri://route/plan/?dname=${encodeURIComponent(k)}&dev=0&t=1`; }
        function showTab(t) { /* Ë®òÂ∏≥ÂàáÊèõÈÇèËºØ... */ }
        window.onload = renderSchedules;
    </script>
</body>
</html>
